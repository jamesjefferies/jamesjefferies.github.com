<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[James Jefferies and ShedCode Ltd]]></title>
  <link href="http://jamesjefferies.com/atom.xml" rel="self"/>
  <link href="http://jamesjefferies.com/"/>
  <updated>2012-08-25T13:30:25+01:00</updated>
  <id>http://jamesjefferies.com/</id>
  <author>
    <name><![CDATA[James Jefferies]]></name>
    
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[Setting up WordPress]]></title>
    <link href="http://jamesjefferies.com/2012/08/22/setting-up-wordpress/"/>
    <updated>2012-08-22T15:07:00+01:00</updated>
    <id>http://jamesjefferies.com/2012/08/22/setting-up-wordpress</id>
    <content type="html"><![CDATA[<p>So, your server is set up and raring to go. Please see my <a href="http://jamesjefferies.com/2012/08/22/setting-up-a-fresh-debian-server/">earlier blogpost</a> on getting the server to this point.. next!</p>

<h2>Install Apache2</h2>

<p>Let&#8217;s get our web server up and running by installing apache</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>apt-get install apache2</span></code></pre></td></tr></table></div></figure>


<p>and check it is up and running with <code>http://123.456.789.012</code> in your friendly web browser.</p>

<h2>Configure Apache2 for low memory usage</h2>

<p>With previous virtual servers, I&#8217;ve found that Apache needs a bit of tweaking to support WordPress load. I found this useful <a href="http://imperialwicket.com/tuning-apache-for-a-low-memory-server-like-aws-micro-ec2-instances">post</a> about tweaking apache. The nuts and bolts are to amend some of the settings in your <code>/etc/apache2/apache.conf</code> as follows:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>Timeout 30
</span><span class='line'>KeepAlive On
</span><span class='line'>MaxKeepAliveRequests 50
</span><span class='line'>KeepAliveTimeout 10
</span><span class='line'>
</span><span class='line'>&lt;IfModule mpm_prefork_module&gt;
</span><span class='line'>    StartServers          5
</span><span class='line'>    MinSpareServers       5
</span><span class='line'>    MaxSpareServers      10
</span><span class='line'>    MaxClients          150
</span><span class='line'>    MaxRequestsPerChild   0
</span><span class='line'>&lt;/IfModule&gt;</span></code></pre></td></tr></table></div></figure>


<h2>Setting up virtual host with apache</h2>

<p>A very simple set up would be to create the following <code>/etc/apache2/sites-available/myacedomainname.com</code></p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>#Ensure that Apache listens on port 80
</span><span class='line'>#Listen 80 (note uncomment this with ports.conf set to 80 and you will experience a WORLD of pain!)
</span><span class='line'>
</span><span class='line'># Listen for virtual host requests on all IP addresses
</span><span class='line'>NameVirtualHost *:80
</span><span class='line'>
</span><span class='line'>&lt;VirtualHost *:80&gt;
</span><span class='line'>DocumentRoot /var/www/myacedomainname.com
</span><span class='line'>ServerName www.myacedomainname.com
</span><span class='line'>
</span><span class='line'># Other directives here
</span><span class='line'>
</span><span class='line'>&lt;/VirtualHost&gt;</span></code></pre></td></tr></table></div></figure>


<h2>Enable site (and other useful commands)</h2>

<p>Create that file in sites-available and use the following commands to enable/disable - they will give you options when they run as to which sites you want to enable/disable</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>sudo a2ensite
</span><span class='line'>sudo a2dissite</span></code></pre></td></tr></table></div></figure>


<p>Force reload configuration?</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>sudo  /etc/init.d/apache2 force-reload</span></code></pre></td></tr></table></div></figure>


<h2>Install PHP</h2>

<p>Ok, well to get WordPress running, we&#8217;re going to need some PHP, so get it installed</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>apt-get install php5 libapache2-mod-php5</span></code></pre></td></tr></table></div></figure>


<h2>Install MySQL</h2>

<p>And we&#8217;ll need a database too</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>apt-get install mysql-server mysql-client php5-mysql</span></code></pre></td></tr></table></div></figure>


<p>If already installed, but you want to reset it so you can set root password etc, give it a bit of this:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>sudo dpkg-reconfigure mysql-server-5.1</span></code></pre></td></tr></table></div></figure>


<h2>Migrating a site from another provider</h2>

<h3>Database gubbins</h3>

<p>Get a database dump from your old site, either using PHPMyAdmin if installed, or doing a dump from the command line using <code>mysqldump</code>. Hopefully at the end of that process you&#8217;ll be able to import the dump in to your new set up with a bit of:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>mysql -uroot -p &lt; databasedump.sql</span></code></pre></td></tr></table></div></figure>


<p>The dump may contain a create database statement to create the database, right at the top along the lines of</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>CREATE DATABASE `db1234` DEFAULT CHARACTER SET latin1 COLLATE latin1_german2_ci; USE db1234;</span></code></pre></td></tr></table></div></figure>


<p>Now you&#8217;ll need to create a database user for WordPress to use. So make sure you&#8217;ve got a file dump of your WordPress installation, either by command line, or the hosting admin suite, or an FTP application or whatever you&#8217;re comfortable with. You&#8217;re going to need your wp-config.php file which will tell you how your existing WordPress site is set up. This is the bit you need to look at for now</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>/** The name of the database for WordPress */
</span><span class='line'>define('DB_NAME', 'db1234');
</span><span class='line'>
</span><span class='line'>/** MySQL database username */
</span><span class='line'>define('DB_USER', 'dbuser');
</span><span class='line'>
</span><span class='line'>/** MySQL database password */
</span><span class='line'>define('DB_PASSWORD', 'dbpassword');
</span><span class='line'>
</span><span class='line'>/** MySQL hostname */
</span><span class='line'>define('DB_HOST', 'localhost');
</span><span class='line'>
</span><span class='line'>/** Database Charset to use in creating database tables. */
</span><span class='line'>define('DB_CHARSET', 'utf8');
</span><span class='line'>
</span><span class='line'>/** The Database Collate type. Don't change this if in doubt. */
</span><span class='line'>define('DB_COLLATE', '');</span></code></pre></td></tr></table></div></figure>


<p>So in your existing set up you have a database user called <code>dbuser</code> with password <code>dbpassword</code> so create that user in your new setup as follows</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>grant all on db1234.* to 'dbuser'@'localhost' identified by 'dbpassword';</span></code></pre></td></tr></table></div></figure>


<p>Then make sure it works with a bit of <code>mysql -udbuser -Ddb1234 -p</code> enter your password and hopefully you are in.</p>

<h3>Filesystem</h3>

<p>Now get that dump of the filesystem you have and unpack it in <code>/var/www/myacedomain.com</code> or whatever you set in your virtual hosts configuration earlier. You may need to change the ownership of everything, including that directory to www-data with a bit of</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>sudo chown -R www-data:www-data /var/www/myacedomain.com</span></code></pre></td></tr></table></div></figure>


<p>
and check the permissions too, directories should be set to 755 and files to 644. You can enforce this with</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>sudo find . -type f -print | sudo xargs chmod 644  # Files
</span><span class='line'>sudo find . -type d -print | sudo xargs chmod 755  # Directories</span></code></pre></td></tr></table></div></figure>


<p>It is entirely possible that after all this, you can now hit <code>http://myacedomain.com</code> or <code>http://123.456.789.012</code> and see your migrated WordPress site!</p>

<h3>UTF-8 issues</h3>

<p>Now, one issue I&#8217;ve had in the past is problems with UTF-8 conversion. I.e. the posts you&#8217;ve migrated end up with funny characters like â€“ â€œ â€™ â€ - you can tell if this is causing you grief because you see the characters mixed up in your posts, but if you comment out these lines (by adding // in front) in your WordPress config, then they.. ahem, magically go away</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>define('DB_CHARSET', 'utf8');
</span><span class='line'>define('DB_COLLATE', '');</span></code></pre></td></tr></table></div></figure>


<p>Best not to do that though, you <em>can</em> use the <a href="http://wordpress.org/extend/plugins/search-and-replace/">search and replace</a> WordPress plugin to replace all the dodgy characters in the database. Find &#8220;â&#8221; and replace with &#8220;&#8221; - hooray!</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Setting up a Fresh Debian Server]]></title>
    <link href="http://jamesjefferies.com/2012/08/22/setting-up-a-fresh-debian-server/"/>
    <updated>2012-08-22T14:41:00+01:00</updated>
    <id>http://jamesjefferies.com/2012/08/22/setting-up-a-fresh-debian-server</id>
    <content type="html"><![CDATA[<h2>Accessing the server</h2>

<p>Once set up, you will have the IP address, in the form 123.456.789.012 and the root password. This means you will be able to log on to the server using ssh (secure shell), i.e.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>ssh root@123.456.789.012</span></code></pre></td></tr></table></div></figure>


<p>You will get a message along the lines of</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>The authenticity of host '123.456.789.012(123.456.789.012)' can't be established. RSA key fingerprint is blah blah bla
</span><span class='line'>Are you sure you want to continue connecting (yes/no)?</span></code></pre></td></tr></table></div></figure>


<p>to which you will reply</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>yes</span></code></pre></td></tr></table></div></figure>


<p>and you will then get</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>Warning: Permanently added '123.456.789.012' (RSA) to the list of known hosts.
</span><span class='line'>root@123.456.789.012's password: </span></code></pre></td></tr></table></div></figure>


<p>which is when you can enter your password. Hopefully then you&#8217;ll be logged on to the server.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>blah blah blah snip…
</span><span class='line'>servername:~# </span></code></pre></td></tr></table></div></figure>


<h3>First things first</h3>

<p>Root access is the super user for your server. You really don&#8217;t want to have people being able to log on to your server as root. What you really need is to have user accounts which people can use to log on, and if/when required, they can get super user privileges to do whatever they need to do.</p>

<p>What we are going to do is to stop root being able to secure shell straight in to the server, create a new user account to use for our admin (with upgradable privileges) and run ssh on a different port to deter basic attacks.</p>

<h3>Change root&#8217;s password!</h3>

<p>So you have a default root password - CHANGE IT to a new one! From a root prompt, use <code>passwd</code> to change the password</p>

<h3>Adding a new user</h3>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>adduser james</span></code></pre></td></tr></table></div></figure>


<p>Will create a new user, called James - you can add in extra details as you go like full name etc.</p>

<p>Now we want to allow james a bit of privilege, not by default though, but by using the sudo command.</p>

<h4>Aside - setting default editor to be vi</h4>

<p>By default, for all users, you may want to use vi as your editor (ok, you may not, but I do!) so add the following to <code>/etc/profile</code></p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>EDITOR=vi
</span><span class='line'>export EDITOR</span></code></pre></td></tr></table></div></figure>


<h3>Giving the new user sudo privileges</h3>

<p>You may need to install sudo if it isn&#8217;t already installed on your server. It&#8217;s a simple case of</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>apt-get install sudo</span></code></pre></td></tr></table></div></figure>


<p>Then, the application <code>visudo</code> is your friend. You edit the config file using visudo and then sudo does the rest. When you open the file, you&#8217;ll see a section with:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class=''><span class='line'># User privilege specification
</span><span class='line'>root    ALL=(ALL) ALL
</span><span class='line'>admin ALL = (ALL) ALL
</span><span class='line'>james ALL = (ALL) ALL</span></code></pre></td></tr></table></div></figure>


<p>By adding my own entry, it allows me to upgrade my user to super user privileges for all actions. You can limit the commands which users can run if you like using this, but if you are going to be the super user, you probably want to leave it as all.</p>

<h2>Sorting out access</h2>

<p>Let&#8217;s stop people attempting to log on to the server as <a href="http://www.howtogeek.com/howto/linux/security-tip-disable-root-ssh-login-on-linux/">root via ssh</a> and also to run ssh on a different port than the default. There is a lot of good advice <a href="http://www.foogazi.com/2006/11/29/modify-ssh-to-maximize-security/">here</a></p>

<h3>Amend port</h3>

<p>The default port is 22, change this to something else, which isn&#8217;t being used by anything else</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'># What ports, IPs and protocols we listen for
</span><span class='line'>Port 60</span></code></pre></td></tr></table></div></figure>


<h3>Stop root login</h3>

<p>Now stop people logging in as root</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>PermitRootLogin no</span></code></pre></td></tr></table></div></figure>


<h3>Some other bits</h3>

<p>Give maximum number of log in attempts to be 3, only allow james to login.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>MaxAuthTries 3
</span><span class='line'>AllowUsers james </span></code></pre></td></tr></table></div></figure>


<h3>Restart sshd</h3>

<p>As root (or sudo)</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>/etc/init.d/ssh restart</span></code></pre></td></tr></table></div></figure>


<p>Now try logging in remotely from a different shell (i.e. keep the one you&#8217;ve just restarted sshd on open in case you have any problems!)</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>ssh -p60 james@123.456.789.0123</span></code></pre></td></tr></table></div></figure>


<p>obviously set the p to be the port you set earlier.</p>

<h3>Stop chancers getting in</h3>

<p>It&#8217;s also a good idea to stop people attempting to log on to your server using common passwords, usernames etc. A good way to do this is to install the <a href="http://en.wikipedia.org/wiki/Fail2ban">fail2ban</a> which goes some way to banning people trying to brute force their way in to your server.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>apt-get install fail2ban</span></code></pre></td></tr></table></div></figure>


<p>Default settings are pretty good here.</p>

<h2>Firewall configuration</h2>

<p>UFW or Uncomplicated Firewall is a good first port of call for securing your shiny new server. You can install it as root with</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>apt-get install ufw</span></code></pre></td></tr></table></div></figure>


<p>Now, unlike fail2ban, ufw is installed switched off. You need to configure a few things before getting it up and running and providing that extra security. By default ALL ports are shut, so make sure you&#8217;ve opened up the ones you need before switching the firewall on!</p>

<p>For example, if you&#8217;ve set up your ssh to run on port 60, then you need to run</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>ufw allow 60</span></code></pre></td></tr></table></div></figure>


<p>If you&#8217;re going to be running apache on port 80 (the usual)</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>ufw allow 80</span></code></pre></td></tr></table></div></figure>


<p>Here are a few <a href="http://www.mmncs.com/2011/07/this-guide-shows-howto-install-and-setup-uncomplicatedfirewall-ufw-on-linux-ubuntu-10-04-and-11-04-and-other-debian-distributions/">notes</a></p>

<p>Don&#8217;t forget to run <code>ufw enable</code> when you are ready! <code>ufw status</code> tells you what is set up.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[From MySQL datadump to mongo]]></title>
    <link href="http://jamesjefferies.com/2012/08/16/from-mysql-datadump-to-mongo/"/>
    <updated>2012-08-16T14:42:00+01:00</updated>
    <id>http://jamesjefferies.com/2012/08/16/from-mysql-datadump-to-mongo</id>
    <content type="html"><![CDATA[<p>Let us say that you have a MySQL dump of  a database table, with a load of data which ideally, you&#8217;d like to pull into a Mongo DB as json.</p>

<p>What you could do is…</p>

<h2>Import data in to MySQL database</h2>

<p>Usual kind of thing here, assuming you have a MySQL username for a created database:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>mysql -uusername -p -Ddbname &lt; mysqldumpfile.sql</span></code></pre></td></tr></table></div></figure>


<h2>Export data from MySQL database in json format</h2>

<p>There is a cracking ruby gem <a href="https://github.com/seamusabshere/mysql2xxxx">mysql2xxxx</a> which will export from a mysql database to various formats, including json.</p>

<p>You can drive it via code or a number of binaries are provided. So:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>mysql2json --user=username --password=password --database=dbname --execute="select * from my_special_table" &gt; my_special_file.json</span></code></pre></td></tr></table></div></figure>


<h2>Importing the json straight in to your mongodb</h2>

<p>Then you can use mongoimport to pull in the json. If your export from <code>mysql2json</code> is surrounded by the square brackets, you&#8217;ll need the <code>--jsonArray</code> option. Your command will need to be something like:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>mongoimport --type json --file my_special_file.json --collection mycollection --db mymongodb --jsonArray</span></code></pre></td></tr></table></div></figure>


<h2>Summary</h2>

<p>Simple three step transformation from MySQL dump to Mongo. You may know a better, more straightforward way of doing this, please add a comment if you do!</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Parse Train Describer CSV Data]]></title>
    <link href="http://jamesjefferies.com/2012/08/16/parse-train-describer-csv-data/"/>
    <updated>2012-08-16T12:35:00+01:00</updated>
    <id>http://jamesjefferies.com/2012/08/16/parse-train-describer-csv-data</id>
    <content type="html"><![CDATA[<p>If you are using the Network Rail Open Data Feeds, then hopefully you&#8217;ve had a look at the fantastic <a href="http://wiki.openraildata.info/index.php/TD_Berth_Steps">wiki</a> started by <a href="http://twitter.com/poggs">poggs</a>.</p>

<p>In the reference data section, it provides a link to a CSV file which poggs is sharing containing Train Describer berths.</p>

<p>I wanted to parse that data using a simple ruby script and get it in to my mongo database.</p>

<p>You can use the mongoimport program to pull in the CSV by adding a header file, or you can use this little ruby script I wrote (with a <em>lot</em> of help from this <a href="http://www.dzone.com/snippets/turn-csv-headers-array-hashes">snippet</a>) which converts to JSON and inserts it in to the mongo db.</p>

<div><script src='https://gist.github.com/3369575.js?file='></script>
<noscript><pre><code>require 'csv'
require 'json'
require 'mongo'
=begin

Info from http://http://wiki.openraildata.info/index.php/TD_Berth_Steps

# Example header
# td_area,step_type,from_berth,to_berth,stanox,stanme,event,platform,line,trust_berth_offset,route,line,description

# Example data
AD,B,0632,0630,89321,PLUCKLY,A,1,,24,,,08-05-2012
=end

FILENAME=&quot;BerthStepsFile.csv&quot;

# You might want to change this, easily done
HEADER = ['td_area','step_type','from_berth','to_berth','stanox','stanme','event','platform','line','trust_berth_offset','route','line','description']

csv_data = CSV.read FILENAME

headers = HEADER.map {|i| i.to_s }
string_data = csv_data.map {|row| row.map {|cell| cell.to_s } }
array_of_hashes = string_data.map {|row| Hash[*headers.zip(row).flatten] }

# Assume mongo database is called rail (or it will create one if it doesn't exist)
db = Mongo::Connection.new.db(&quot;rail&quot;)

# Create/use collection called berthsteps
coll = db.collection(&quot;berthsteps&quot;)

array_of_hashes.each do |td|

  # Sanity check debug, output each td message as nice looking JSON 
  #puts JSON.pretty_generate(td)   

  # insert into collection and return with the id 
  id = coll.insert(td)

end</code></pre></noscript></div>



]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Before you buy a Berg Little Printer...]]></title>
    <link href="http://jamesjefferies.com/2012/08/14/before-you-buy-a-berg-little-printer-dot-dot-dot/"/>
    <updated>2012-08-14T19:56:00+01:00</updated>
    <id>http://jamesjefferies.com/2012/08/14/before-you-buy-a-berg-little-printer-dot-dot-dot</id>
    <content type="html"><![CDATA[<p>You may have heard today that <a href="http://bergcloud.com/littleprinter/">BERG&#8217;s Little Printer</a> is now available for pre-order. It does look like a great bit of kit &amp; the ability to produce your own content should produce some interesting rolls of paper!</p>

<p>Anyways, before you splash out with your hard earned £199 + P&amp;P you should, you <em>really</em> should have a look at <a href="http://gofreerange.com/printer">Go free range&#8217;s Open Source printer</a>.</p>

<p>Not only are they cheaper than the Little Printer, but being Open Source &amp; built using Rails &amp; Arduino, you can get stuck in to the source code, make changes yourself and create some interesting content.</p>

<p>As part of the <a href="http://happenstanceproject.com">Happenstance Project</a> we were fortunate to borrow a couple of Go free range&#8217;s printers and start experimenting. We hooked them up with <a href="http://twilio.com">Twilio</a> and a bit of ruby magic to get them recieving SMS messages. Each printer (Cathy &amp; Heathcliff) had their own phone numbers, when they recieved the message, they printed it out &amp; sent the contents to their twitter feeds.</p>

<p>You can read more on this blog <a href="http://jamesjefferies.com/2012/05/04/week-3-cathy-heathcliffs-amazing-adventures/">elsewhere</a> or you can watch our <a href="http://tedxtalks.ted.com/video/TEDxSheffield-2012-Leila-Johnst">TEDx</a> talk on the project as a whole.</p>

<p>So, buy all means pre-order a Little Printer, but have a think about getting the super duper Go Free Ranger printer first!</p>

<p><img src="http://25.media.tumblr.com/tumblr_m4uf1acC5R1rvn0edo1_500.jpg" title="Cathy Long Cat" alt="Cathy long cat" /></p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Importing Network Rail Train Movement feeds into MongoDB]]></title>
    <link href="http://jamesjefferies.com/2012/08/07/importing-network-rail-train-movement-feeds-into-mongodb/"/>
    <updated>2012-08-07T14:33:00+01:00</updated>
    <id>http://jamesjefferies.com/2012/08/07/importing-network-rail-train-movement-feeds-into-mongodb</id>
    <content type="html"><![CDATA[<h2>Network Rail datafeeds?</h2>

<p>Ah yes, please my previous <a href="http://jamesjefferies.com/2012/07/04/getting-started-with-network-rails-datafeeds/">blog</a> post for further info, apologies for the lack of updates on here, I&#8217;ve been away, sent round the loop line.</p>

<h2>Why MongoDB?</h2>

<p><a href="http://www.mongodb.org/">MongoDB</a> is a scalable, high-performance, open source, NoSQL database. I thought it would make a good fit for the train movement feeds as it&#8217;s storage is oriented towards JSON-style documents. It&#8217;s JSON-style because it actually uses <a href="http://bsonspec.org/">binary-encoded serialisation</a> behind the scenes.</p>

<p>There is a nice little interactive tutorial on the MongoDB home page to get you in to the swing of things.</p>

<h2>Getting Mongo installed on OS X</h2>

<p>I use <a href="http://mxcl.github.com/homebrew/">Homebrew</a> for installing packaged stuff on to my Mac, if you use it, then you can easily install it with</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>brew install mongodb</span></code></pre></td></tr></table></div></figure>


<h2>What do you need for Ruby Mongo Magic?</h2>

<p>There is a standard Mongo driver available, which you can install using gem</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>gem install mongo</span></code></pre></td></tr></table></div></figure>


<p>but it is also worth installing the C compiled extension to speed up any BSON serialisation</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>gem install bson_ext</span></code></pre></td></tr></table></div></figure>


<p>More info can be found on the <a href="http://www.mongodb.org/display/DOCS/Ruby+Language+Center">official pages</a></p>

<h2>Code example?</h2>

<p>Here you go, proper version in the <a href="https://github.com/jamesjefferies/national-rail-datafeeds-ruby-examples">github repository</a></p>

<div><script src='https://gist.github.com/3285558.js?file='></script>
<noscript><pre><code>require 'rubygems' 
require 'stomp'
require 'json'
require 'mongo'

begin
  # Credentials set here as environment variables
  @user = ENV[&quot;DATAFEEDS_USER&quot;]; 
  @password = ENV[&quot;DATAFEEDS_PASSWORD&quot;]
  @host = &quot;datafeeds.networkrail.co.uk&quot;
  @port = 61618

  # Example destination add yours here
  @destination = &quot;/topic/TRAIN_MVT_ALL_TOC&quot;

  puts &quot;Connecting to datafeeds as #{@user} using stomp protocol stomp://#{@host}:#{@port}\n&quot; 
  @connection = Stomp::Connection.open @user, @password, @host, @port, true 
  @connection.subscribe @destination 

  while true
    @msg = @connection.receive

    # Use JSON library to parse the messge body
    message_body = JSON.parse(@msg.body)

    db = Mongo::Connection.new.db(&quot;rail&quot;)
    coll = db.collection(&quot;td&quot;)

    message_body.each do |td| 

      # Sanity check debug, output each td message as nice looking JSON 
      # puts JSON.pretty_generate(td)   
      
      # insert into collection
      id = coll.insert(td)

    end
  end 

  @connection.disconnect
rescue 
end</code></pre></noscript></div>


<h2>Examples of querying Mongo</h2>

<p>There are lots of good examples and resources for using Mongo, but just a couple of examples related to the schema I&#8217;ve used in the example. You can fire up the interactive Mongo console and try the following (once you have some data!)</p>

<p>To retrieve all Departure events</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>db.td.find({ "body.event_type" : "DEPARTURE" })</span></code></pre></td></tr></table></div></figure>


<p>To retrieve 10 (using limit) Train Movement (type 3) messages</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>db.td.find({ "header.msg_type" : "0003" }).limit(10)</span></code></pre></td></tr></table></div></figure>



]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Moving from WordPress to Octopress]]></title>
    <link href="http://jamesjefferies.com/2012/08/01/moving-from-wordpress-to-octopress/"/>
    <updated>2012-08-01T12:43:00+01:00</updated>
    <id>http://jamesjefferies.com/2012/08/01/moving-from-wordpress-to-octopress</id>
    <content type="html"><![CDATA[<h2>What is Octopress?</h2>

<p><a href="http://octopress.org">Octopress</a> is a blogging engine designed to be run from the command line, it uses Markdown for formatting content and doesn&#8217;t have any built in GUI editing facilities.</p>

<p>It is worth looking at though because it generates static HTML files, so you don&#8217;t need a database, you don&#8217;t need PHP you just need to serve straight forward files.</p>

<p>The integration with github pages is very nice, so you can actually use github to host your blog or website leaving them to worry about server admin etc!</p>

<h2>Why did I switch?</h2>

<p>At the moment, my virtual server was only hosting my blog and nothing else. At the moment, I don&#8217;t need it for anything else, so being able to move to github pages for free was one draw, saving me £X a month. When I need a server again, I&#8217;ll set one up.</p>

<p>I having nothing against WordPress per se, but it wasn&#8217;t very hackable by me, a non-PHP developer. Now with Octopress, it seems a lot more straight forward. Plus I no longer have a MySQL or PHP install to maintain.</p>

<p>It <em>feels</em> like the Octopress templates are more designer friendly. I&#8217;ll let you know if that is the case!</p>

<p>My site now has very straightforward version control, powered by git.</p>

<h2>How does it work?</h2>

<p>You check out the <a href="https://github.com/imathis/octopress">source</a> (from github of course). The html generating engine is written in ruby, so you need to have that installed. Once set up and configured, you can push your content using git to wherever you want to deploy it.</p>

<p>When you deploy, octopress turns your markdown and HTML templates in to straight forward HTML pages ready to be served.</p>

<p>It uses Disqus by default for comments, but if you have a WordPress account, you can set that up with Disqus before migration. Works a treat.</p>

<h2>Exiting WordPress</h2>

<p>At first I tried the ruby WordPress migrating script. Basically it was not very good and I think I wasted a fair bit of time on it. Better is the Python <a href="https://github.com/thomasf/exitwp">exitwp.py</a> script which is.. brilliant!</p>

<h2>Downsides</h2>

<ul>
<li>There is a much smaller plugin selection available</li>
<li>You generally re-generate the whole site when you want to publish something new (there are ways around that though, to selectively generate new content).</li>
<li>If you had a blog with a lot of posts, then it might take some time to generate.</li>
<li>Small amount of off-the-shelf themes</li>
</ul>


<h2>Upsides</h2>

<ul>
<li>The standard plugins you might want are available, twitter, github, google analytics.</li>
<li>Github pages integration is very straightforward</li>
<li>Simple caching can be set up if required, but no more W3 Total Cache Super Plugin things</li>
<li>No WordPress security loopholes and patches</li>
<li>No PHP or MySQL loopholes or patches</li>
<li>Fast</li>
<li>Relatively lightweight page sizes</li>
<li>Nice default, responsive design</li>
</ul>


<h2>Theme</h2>

<p>I&#8217;m using a slightly customised default theme at the moment, but hopefully will have a bespoke one up and running soon.</p>

<h2>Summary</h2>

<p>Now I&#8217;m migrated, I&#8217;m liking it so far, let me know what you think..</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Downloading the Network Rail Schedules]]></title>
    <link href="http://jamesjefferies.com/2012/07/18/downloading-the-network-rail-schedules/"/>
    <updated>2012-07-18T17:43:39+01:00</updated>
    <id>http://jamesjefferies.com/2012/07/18/downloading-the-network-rail-schedules</id>
    <content type="html"><![CDATA[<p>As well as the live feeds which you can subscribe to for the Network Rail data, you can also download the Schedule feed which is delivered by Amazon S3. The Schedule feed is an extract of train schedules from the Integration Train Planning System.</p>

<p>When you have your Network Rail account you can subscribe, either to all the data, or to the Train Operators you are interested in. However, at the time of writing, the only feed which works is the one for ALL the data, the Train Operator specific downloads throw an unhelpful error</p>

<blockquote><p>HTTP Status 401 - User not subscribed to CIF_HL_FULL_DAILY</p></blockquote>

<p>Which is a bit rubbish really. So my advice is, at this point to subscribe to ALL the data rather than just for one TOC. You can then access the feeds and download the zip file with either:</p>

<p><a href="https://datafeeds.networkrail.co.uk/ntrod/CifFileAuthenticate?type=CIF_ALL_FULL_DAILY&amp;day=toc-full">https://datafeeds.networkrail.co.uk/ntrod/CifFileAuthenticate?type=CIF_ALL_FULL_DAILY&amp;day=toc-full</a></p>

<p>for the full feed or, say</p>

<p><a href="https://datafeeds.networkrail.co.uk/ntrod/CifFileAuthenticate?type=CIF_ALL_UPDATE_DAILY&amp;day=toc-mon">https://datafeeds.networkrail.co.uk/ntrod/CifFileAuthenticate?type=CIF_ALL_UPDATE_DAILY&amp;day=toc-mon</a></p>

<p>for Monday&#8217;s update.</p>

<p>Note that you will need to authenticate if you haven&#8217;t already, using your username and password.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[The Electrified Spine (and the rest of the news)]]></title>
    <link href="http://jamesjefferies.com/2012/07/16/the-electrified-spine-and-the-rest-of-the-news/"/>
    <updated>2012-07-16T15:39:04+01:00</updated>
    <id>http://jamesjefferies.com/2012/07/16/the-electrified-spine-and-the-rest-of-the-news</id>
    <content type="html"><![CDATA[<p>Today the government has announced a further set of infrastructure investment for the railways. This has to be good news, especially where electrification is concerned. Electric trains are more efficient, cleaner and perform better than their diesel (and steam I suppose!) counterparts. I appreciate that the electricity still has to come from somewhere, but in the main it is the right thing to do.</p>

<h2>Already Announced</h2>

<p>We know that plans to electrify the Great Western Mainline (Paddington to Cardiff, Bristol, Oxford &amp; Newbury), plus the Trans-Pennine route between Manchester &amp; York, Blackpool and Manchester to Liverpool are already underway. These are all good things, but there were some unsatisfactory omissions. The new announcement helps with some of the missing links, but not all of them.</p>

<p>There is a helpful <a href="http://assets.dft.gov.uk/publications/hlos-2012/map-hlos-electrification.pdf">map</a> which shows these routes in glorious technicolour</p>

<h2>New Plans - Midland Mainline</h2>

<p>Hooray, the Midland Mainline, which has been electrified to Bedford for many years is to be electrified to Nottingham and Sheffield (via Derby). For those of us who regularly travel to London from Sheffield we should experience a faster service. Not necessarily more trains though, no extra track is to be laid and unless signalling is replaced, you can&#8217;t fit that many more trains on the track.</p>

<p>As far as I&#8217;m aware, there has been no announcement about rolling stock either, the simple solution for East Midlands Trains (assuming they&#8217;re still running the franchise) will be to get the existing Meridian trains upgraded with an extra coach containing all of the required electrical equipment, plus pantograph for current collection etc. Easier said than done, but a lot cheaper than brand new trains. So it is likely you&#8217;ll still be sitting on the same seat.</p>

<h2>Missed Opportunities - Midland Mainline</h2>

<h3>Erewash Valley</h3>

<p>Why or why isn&#8217;t the Erewash valley route included as part of the plans? This is the line which goes straight on at the junction for Derby and Nottingham, joining up with the Sheffield line between Clay Cross and Chesterfield - it&#8217;s the most direct route to Sheffield and is useful when engineering works close the route via Derby. Very few London bound trains use this route, most are routed via Derby from Sheffield, but electrifying it would be useful for diversions and could give the opportunity for Sheffield, Leicester, London services which don&#8217;t call at Derby, potentially shaving more time off the journey.</p>

<h3>Sheffield to Leeds</h3>

<p>Groan, everybody wants a better service between Leeds and Sheffield, the best being the 45 minute Cross Country packed like a sardine train which goes via Wakefield. Why not electrify that route too so that more London trains can be extended easily to Leeds? Plus get some more electrified suburban stoppers on that route. Derby to Leeds semi-fast?</p>

<h3>Sheffield to Doncaster</h3>

<p>Whilst we&#8217;re at it, how about the link to Doncaster too, providing more opportunities for diversions and commuter services?</p>

<h2>New Plans - Oxford to Corby &amp; Nuneaton</h2>

<p>This wasn&#8217;t on my radar at all, but makes a lot of sense for new cross country routes as well as faster Birmingham to London trains via Oxford. Incorporating the start of the Oxford to Cambridge route (as far as Bedford) makes sense with that re-opening. The potential for new routes, well re-establishing old routes should give that part of the country a much better service.</p>

<h2>New Plans - Reading to Southampton</h2>

<p>Cross country trains mainly use this route at the moment and it is partially already electrified using the Southern standard 3rd Rail system. Over the next&#8230; err.. 50 years (?) the 3rd rail system will be phased out and replaced with the standard 25kv AC overhead system. This is the beginning of that process and also good preparation for Cross Country. Birmingham to Southampton trains will be electric all the way, as might, say Sheffield to Southampton trains, routed via Oxford.</p>

<h2>The Spine</h2>

<p>According to the plan, the Electrified Spine is to be the Southampton to Coventry and Sheffield routes and is a piece of spin. If I had a spine looking like that I&#8217;d be worried! The only new route, as far as I can see is the already announced re-opening of the Oxford to Bedford route, everywhere else is straightforward electrification.</p>

<h2>Summary</h2>

<p>I&#8217;m very happy to see these extra plans announced, but would like to understand more about why some very obvious links and connections have been omitted. What to others think?</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Getting started with Network Rail's datafeeds]]></title>
    <link href="http://jamesjefferies.com/2012/07/04/getting-started-with-network-rails-datafeeds/"/>
    <updated>2012-07-04T23:46:41+01:00</updated>
    <id>http://jamesjefferies.com/2012/07/04/getting-started-with-network-rails-datafeeds</id>
    <content type="html"><![CDATA[<p>I&#8217;ve had a few railway project ideas knocking around for ages now, but have had a couple of blockers which have meant they have not progressed. Mainly lack of time and lack of data! I&#8217;m therefore clearing the decks for July and August to spend some decent time working on these ideas, which also co-incides with Network Rail giving access to a new platform providing live data feeds. You may have heard about <a href="http://www.techweekeurope.co.uk/news/network-rail-open-data-feeds-83128">the launch</a>, I believe the platform was developed in conjunction with <a href="http://rockshore.net/">Rockshore</a>, well, it&#8217;s what this <a href="https://twitter.com/rockshoreltd/status/218323058493108224">tweet</a> says anyway.</p>

<h2>Where do you start?</h2>

<p>If you are interested in using the datafeeds yourself, you can read all about it on <a href="http://www.networkrail.co.uk/data-feeds/">Network Rail&#8217;s site</a> which also has a link to download the developer&#8217;s guide in PDF format.</p>

<p>First, you need to <a href="https://datafeeds.networkrail.co.uk/ntrod/login">create an account</a> - I believe there are limited numbers of accounts going at the moment, so the sooner you do that, the better.</p>

<p>There are two types of feeds available, pub/sub using the stomp protocol for real-ish time data &amp; downloads of huge files from Amazon S3 for timetables etc.</p>

<p>Once your account is active, you can subscribe to any of the pub/sub datafeeds you like and away you go.</p>

<h2>Receiving Messages</h2>

<p>I decided that I was going to try accessing the pub/sub datafeeds using Ruby (not my usual language) and put my experimental code on to my git hub account. Feel free to <a href="https://github.com/jamesjefferies/national-rail-datafeeds-ruby-examples">have a look and check it out</a>, I&#8217;ll be using it for my initial experiments, so it should get updated beyond this basic example!</p>

<p>I&#8217;ve also included a sample, no error checking, very straightforward listener below. If you wish to try and run it, then you will of course need Ruby and Ruby gems installed, plus the stomp ruby gem.</p>

<p>Then, you just need to ensure your username and password are set as the relevant environment variables and away you go.</p>

<p>All being well, you should slowly receive updates from the topic you have selected. The example below uses Train positioning data for the East Midlands (TD_MC_EM_SIG_AREA) and assumes that you have subscribed to that feed using the <a href="https://datafeeds.networkrail.co.uk/ntrod/myFeeds">network rail control panel</a></p>

<p>The updates you receive from this program are not formatted at all, it&#8217;s just sending the message straight to string. Of course, this is just helping you know you&#8217;re set up correctly. So you would get something like:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="o">&lt;</span><span class="no">Stomp</span><span class="o">::</span><span class="no">Message</span> <span class="n">headers</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;message-id&quot;</span><span class="o">=&gt;</span><span class="s2">&quot;ID:blahblah&quot;</span><span class="p">,</span> <span class="s2">&quot;destination&quot;</span><span class="o">=&gt;</span><span class="s2">&quot;/topic/TD_MC_EM_SIG_AREA&quot;</span><span class="p">,</span> <span class="s2">&quot;timestamp&quot;</span><span class="o">=&gt;</span><span class="s2">&quot;1341436026840&quot;</span><span class="p">,</span> <span class="s2">&quot;expires&quot;</span><span class="o">=&gt;</span><span class="s2">&quot;1341436326840&quot;</span><span class="p">,</span> <span class="s2">&quot;persistent&quot;</span><span class="o">=&gt;</span><span class="s2">&quot;true&quot;</span><span class="p">,</span> <span class="s2">&quot;priority&quot;</span><span class="o">=&gt;</span><span class="s2">&quot;4&quot;</span><span class="p">}</span> <span class="n">body</span><span class="o">=</span><span class="s1">&#39;[{&quot;CA_MSG&quot;:{&quot;to&quot;:&quot;1234&quot;,&quot;time&quot;:&quot;1341435963000&quot;,&quot;area_id&quot;:&quot;WH&quot;,&quot;msg_type&quot;:&quot;CA&quot;,&quot;from&quot;:&quot;5678&quot;,&quot;descr&quot;:&quot;1Z99&quot;}}]&#39;</span> <span class="n">command</span><span class="o">=</span><span class="s1">&#39;MESSAGE&#39;</span> <span class="o">&gt;</span>
</span></code></pre></td></tr></table></div></figure>


<p>Ultimately of course, you&#8217;d process the JSON from the body and do something with it.</p>

<h2>Example Ruby Listener</h2>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="nb">require</span> <span class="s1">&#39;rubygems&#39;</span>
</span><span class='line'><span class="nb">require</span> <span class="s1">&#39;stomp&#39;</span>
</span><span class='line'>
</span><span class='line'><span class="k">begin</span>
</span><span class='line'>  <span class="c1"># Credentials set here as environment variables</span>
</span><span class='line'>  <span class="vi">@user</span> <span class="o">=</span> <span class="no">ENV</span><span class="o">[</span><span class="s2">&quot;DATAFEEDS_USER&quot;</span><span class="o">]</span><span class="p">;</span>
</span><span class='line'>  <span class="vi">@password</span> <span class="o">=</span> <span class="no">ENV</span><span class="o">[</span><span class="s2">&quot;DATAFEEDS_PASSWORD&quot;</span><span class="o">]</span>
</span><span class='line'>  <span class="vi">@host</span> <span class="o">=</span> <span class="s2">&quot;datafeeds.networkrail.co.uk&quot;</span>
</span><span class='line'>  <span class="vi">@port</span> <span class="o">=</span> <span class="mi">61618</span>
</span><span class='line'>
</span><span class='line'>  <span class="c1"># Example destination add yours here</span>
</span><span class='line'>  <span class="vi">@destination</span> <span class="o">=</span> <span class="s2">&quot;/topic/TD_MC_EM_SIG_AREA&quot;</span>
</span><span class='line'>
</span><span class='line'>  <span class="nb">puts</span> <span class="s2">&quot;Connecting to datafeeds as </span><span class="si">#{</span><span class="vi">@user</span><span class="si">}</span><span class="s2"> using stomp protocol stomp://</span><span class="si">#{</span><span class="vi">@host</span><span class="si">}</span><span class="s2">:</span><span class="si">#{</span><span class="vi">@port</span><span class="si">}</span><span class="se">\n</span><span class="s2">&quot;</span>
</span><span class='line'>  <span class="vi">@connection</span> <span class="o">=</span> <span class="no">Stomp</span><span class="o">::</span><span class="no">Connection</span><span class="o">.</span><span class="n">open</span> <span class="vi">@user</span><span class="p">,</span> <span class="vi">@password</span><span class="p">,</span> <span class="vi">@host</span><span class="p">,</span> <span class="vi">@port</span><span class="p">,</span> <span class="kp">true</span>
</span><span class='line'>  <span class="vi">@connection</span><span class="o">.</span><span class="n">subscribe</span> <span class="vi">@destination</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">while</span> <span class="kp">true</span>
</span><span class='line'>    <span class="vi">@msg</span> <span class="o">=</span> <span class="vi">@connection</span><span class="o">.</span><span class="n">receive</span>
</span><span class='line'>    <span class="nb">puts</span> <span class="vi">@msg</span>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'>  <span class="vi">@connection</span><span class="o">.</span><span class="n">disconnect</span>
</span><span class='line'><span class="k">rescue</span>
</span><span class='line'><span class="k">end</span>
</span></code></pre></td></tr></table></div></figure>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Week 10 - the end of the Happenstance]]></title>
    <link href="http://jamesjefferies.com/2012/06/22/week-10-the-end-of-the-happenstance/"/>
    <updated>2012-06-22T18:16:55+01:00</updated>
    <id>http://jamesjefferies.com/2012/06/22/week-10-the-end-of-the-happenstance</id>
    <content type="html"><![CDATA[<p>At our Open House yesterday we had an &#8216;In conversation&#8217; kind of thing with our mentor <a href="http://twitter.com/jamesb">James Boardwell</a> and what we thought would be a chat for 30 minutes or so, ended up being nearer to 2 hours! I knew we could talk about the last 10 weeks of Happenstance, that we had ideas and theories about what happened and why, but I hadn&#8217;t anticipated there being so much to talk about&#8230; in front of an audience!</p>

<p>When I went freelance last summer and set up my company, ShedCode, I was planning on doing some client work and in between, hopefully working on some of my own ideas to see what would happen. In the end I did 99% client work and was planning, at some point, to pause and work on my stuff.</p>

<p>That&#8217;s when Happenstance came along and it is fair to say that I thought at the beginning that Happenstance may have been a pleasant and interesting detour for my career as a Software Engineer/Developer and Techie. Instead of returning back to the path I was treading before Happenstance, I&#8217;ve finished the project on what feels like a completely different path, going who knows where!</p>

<p>Helping an arts organisation learn new things, to be inspiring and to fix stuff is what I thought would happen. We did some of that, but also I learnt what a Technologist could be, that we could make things, real things with lives of their own which will live on after the project has finished. I&#8217;ve met new people, made friends and found out about interesting things. An interest in electronics has been rekindled, thanks to arduinos and I&#8217;ve started to pick up some Ruby and a bit of Rails. Speaking at Future Everything, TedX Sheffield and at the Open Houses has given me some confidence in public speaking.</p>

<p>People have been so encouraging! Thanks to all who have had kind words to say, shared their knowledge, wisdom, contacts, experience, advice, tea and biscuits. Thanks too to those at <a href="http://sitegallery.org">Site</a> who have been incredibly open, helpful and friendly during the project, I&#8217;ve really appreciated it. Special thanks of course go to my co-resident, <a href="http://finalbullet.com">Leila</a>, who has put up with some of my more, er, random ideas, given me confidence to do stuff, been a great sounding board, co-speaker and partner in crime. She&#8217;s been so generous to me and I think we&#8217;ve been a great team (even if I say so myself!). I hope we can work together on more stuff soon!</p>

<p>I wrote a couple of blog posts about what to do next, both for me in <a href="http://jamesjefferies.com/2012/05/31/whatever-next/">general</a> and <a href="http://jamesjefferies.com/2012/06/15/whatever-next-the-technical-stuff/">technically</a> and really it&#8217;s a work in progress. We&#8217;ve got debrief next week, then I&#8217;m on holiday for a couple of weeks. I think I really need a break, but I don&#8217;t want to lose the momentum I&#8217;ve built up during Happenstance. So, those who&#8217;ve become my friends over the last 10 weeks and those who&#8217;ve known me for ages, don&#8217;t let me slip in to old habits and ways &amp; please bear with me as I bounce ideas around like fleas on space hoppers. I hope that life post-Happenstance is going to get even more interesting!</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Whatever next - the technical stuff]]></title>
    <link href="http://jamesjefferies.com/2012/06/15/whatever-next-the-technical-stuff/"/>
    <updated>2012-06-15T12:51:02+01:00</updated>
    <id>http://jamesjefferies.com/2012/06/15/whatever-next-the-technical-stuff</id>
    <content type="html"><![CDATA[<p>In recent years my main programming language has been Java, sprinkled with a bit of the usual korn/zsh scrips, SQL, HTML, JavaScript and other gubbins. The world of Java is rich with libraries, web frameworks, platforms and alternate languages. I&#8217;ve invested a lot of time in this ecosystem, knowing which tools are useful for which problems, gained expertise in various web frameworks, development environments and platforms, generally to be as productive as I&#8217;ve ever been.</p>

<p>For the last couple of years though, I&#8217;ve been pondering whether to stick with what I know, or to spend time learning some new stuff. It is fair to say that I&#8217;m not a natural polyglot. I like to spend decent time getting to know a language and it&#8217;s ecosystem and I find it can be tricky switching.</p>

<h3>Grails &amp; Groovy</h3>

<p>At first I spent a bit of time, starting to get to know <a href="http://grails.org">Grails</a>, basically using <a href="http://groovy.codehaus.org/">Groovy</a> on the JVM (Java Virtual Machine) to build a Rails like web framework. The rest of the Grails stack is also stuff which I know very well, Spring, Hibernate etc. There is a lot I like about Grails and I&#8217;ve yet to investigate all this is new in the latest 2.0 release.</p>

<p>So, there you go, something I&#8217;d like, building upon a lot which I already know. Should be the favourite right?</p>

<h3>Scala &amp; Play/Lift</h3>

<p>Well, I then started thinking a bit about <a href="http://www.scala-lang.org/">Scala</a>, a language which polarises opinion, especially amongst the Java community. It is either the &#8216;new&#8217; Java or it is a hodge podge of static typed semi functional programming. People complain about it&#8217;s complexity or love how doing things in a more functional fashion reduces code and maintenance and gets it all set up for multi-core CPUs. If I was planning on doing more &#8216;corporate&#8217; work, working on huge projects in London or building a twitter competitor then it&#8217;d make sense for me to have a good look at Scala.</p>

<p>But I&#8217;m not, maybe ShedCode will work on an idea which will one day be huge, I think I&#8217;ll worry about that another time!</p>

<h3>Clojure</h3>

<p>I&#8217;d also like to learn <a href="http://clojure.org/">Clojure</a>, mainly because I think it will be good for my programming skills and good for my brain.</p>

<h3>Rails &amp; Ruby</h3>

<p>Then, working on <a href="http://happenstanceproject.com">Happenstance</a> has made me think again&#8230;</p>

<p>In early 2008 I was going to investigate <a href="http://rubyonrails.org/">Rails</a> &amp; Ruby, one because I liked the fact it was called Rails, but then also because it seemed to be gaining a lot of momentum and interest and it was &#8216;cool&#8217;. In the end I got a job doing java, so I put it on the back burner. I also started to realise that, as is often the case where things are a bit &#8216;cool&#8217; there were quite a few.. ahem.. nobbers around who not only believed that Rails was THE framework to use but that using anything else was such a POOR substitute. I have to be honest, it did my nut. I did meet a few people who seemed ok, but the majority, I didn&#8217;t really get on with.</p>

<p>Now I find that a lot of the R&amp;D web apps I&#8217;m interested in, have been built with Rails. I&#8217;ve also met some more Rails devs who are not nobbers, in fact, they are interesting, helpful, open minded people. I&#8217;d like to work with some of them, I&#8217;d like to build things on top of the work they&#8217;ve done. I&#8217;d like to explore the Rails ecosystem which has inspired so much in other languages (like Grails for example).</p>

<h3>Client Side</h3>

<p>Even though over the last few weeks, I&#8217;ve been thinking more about whether the classic server side MVC web framework is what I should be looking at all. There is a significant trend for using client side JavaScript frameworks for doing a lot of the hardwork in the browser, whilst having a more simple RESTful service/API set up on the server. Examples would be <a href="http://documentcloud.github.com/backbone/">Backbone.js</a>, <a href="http://emberjs.com/">Ember.js</a>, <a href="http://knockoutjs.com/">Knockout.js</a> etc. This somehow feels like a good idea, but I&#8217;m not great with JavaScript and I&#8217;m not sure this is what I want to do just yet. Obviously improving my JavaScript knowledge would be useful regardless!</p>

<h3>Crossroads</h3>

<p>So, I find myself at a crossroads. I&#8217;ll spend some time with Clojure, regardless of what else I do, but I&#8217;ve got some interesting projects to start in the next month or so and I need to decide whether I:</p>

<ol>
<li><p>Learn Rails and see what happens&#8230;</p></li>
<li><p>Go with what I know a bit and build something with Grails. I know the tools, I know the libraries and I know it works (mainly)</p></li>
<li><p>Client side JavaScript stuff</p></li>
<li><p>Go with Scala, build on top of the Java I know and become have decent with functional languages</p></li>
</ol>


<p>At the moment, these are in my preferred order, but I&#8217;ll let you know what happens&#8230;</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Week 7, 8 & 9 - summary]]></title>
    <link href="http://jamesjefferies.com/2012/06/08/week-7-8-9-summary/"/>
    <updated>2012-06-08T15:14:32+01:00</updated>
    <id>http://jamesjefferies.com/2012/06/08/week-7-8-9-summary</id>
    <content type="html"><![CDATA[<p>Oh dear, what happened to week 7, 8 blog posts (I hear you ask)?</p>

<p>Good question. Here&#8217;s a little re-cap of what you missed (thanks <a href="http://offbott.com/">offbott</a> for the reminders!)</p>

<h3>Week 7</h3>

<p>This week was mainly taken up with:</p>

<ul>
<li><p>creating a test version of the site gallery website, so that we could have a good tinker with the layout</p></li>
<li><p>investigating the building&#8217;s network wiring and working out how we could get the office in to a better shape</p></li>
<li><p>an official rehearsal for our TedX Sheffield talk</p></li>
</ul>


<h3>Week 8 - the broken back week</h3>

<p>I really kernackered my back on Wednesday morning, which meant that I ended up working a bit on .. ahem.. Cathy &amp; Heathcliff&#8217;s back ends from home. Thursday was a bit better and we came up with the idea of building a &#8216;who&#8217;s in the house&#8217; lighting board. Leila has been doing lots of soldering. Our IP camera arrived on Friday and we had it looking around the office with it&#8217;s spooky eye.</p>

<h3>Week 9 - the TedX and Sheffield Doc/Fest Week</h3>

<p>Tuesday was Sheffield TedX and we were invited to do a 10 minute talk as part of the whole shebang. We managed to get Heathcliff working by borrowing a MacMini from Site, getting it to pick up the Wi-fi in the Crucible (yes, THAT crucible in Sheffield) and share it&#8217;s ethernet connection. Attendees could then send SMS to Heathcliff and up in the refreshment area, he&#8217;s print out their messages.</p>

<p>We weren&#8217;t in the main part of the Crucible, but the Crucible studio which has room for about 270 people. I will confess and say that I felt the pressure for this one. Speaking in front of 270 people is one thing, being filmed ready for the TedX channel on YouTube is something else again!</p>

<p>I think we did ok and people had nice things to say about us. Hurrah! The other speakers were, in the main, fantastic! Inspiring stuff.</p>

<p>Then, Wednesday was the <a href="http://www.xolabs.co.uk/2011/11/01/xo-summit-expo-2012/">XO Summit</a> as part of Doc/Fest, which I managed to&#8230; errr, attend. Bumped in to and had a chat with the Right Honourable Honor Harger and caught up with some people I&#8217;d met the day before.</p>

<p>Thursday was more Cathy &amp; Heathcliff re-writing. Getting rid of the awful PHP which we&#8217;d used initially and the gmail to ifttt to twitter thing and replacing it with a bit of Ruby and Sinatra which I got running on Heroku (was it any co-incidence that Heroku had a major outage overnight afterwards? I hope so!)</p>

<p>Then today.. blogging ahoy!</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Whatever next?]]></title>
    <link href="http://jamesjefferies.com/2012/05/31/whatever-next/"/>
    <updated>2012-05-31T23:34:05+01:00</updated>
    <id>http://jamesjefferies.com/2012/05/31/whatever-next</id>
    <content type="html"><![CDATA[<h3>Then</h3>

<p>This time last year I was in despair, I wasn’t enjoying my job and it was getting me down. Up to that point I’d spent 6 years writing software for Barclays, 5 years writing software for npower/Yorkshire Electricity, 3 years writing software for the digital agency Technophobia. I could feel myself getting stale and much as I enjoyed working with a lot of my colleagues, it felt to me like I needed a bit of a change.</p>

<p>During August 2011, I left <a href="http://www.technophobia.com">Technophobia</a> and set up my own limited company ShedCode without much of an idea what to do next! Fortunately I was able to get off with a cracking start; I was able to share an office above the <a href="http://www.sitegallery.org">Site Gallery</a> in Sheffield City Centre with 3 good friends and then I was able to do some standard contracting work, 4 days a week to get some funds in the coffers.</p>

<p>Having an office was key to me going freelance, I didn’t really want to work from home, too many distractions, but sharing a small office with people I like and can trust was ideal. Being at tenant at Site also meant that I started to meet people in the building, both staff &amp; other tenants. It’s a great place to work &amp; it’s also where I first heard about the <a href="http://happenstanceproject.com">Happenstance Project.</a> In a nutshell, the project is a 10 week residency for technologists in Arts Organisations of which Site was to be one of them.</p>

<h2>Happenstance</h2>

<p>After umming and ahhing a bit about applying, I decided to go for it, the weekend before the deadline. The actual application process was really useful for me, helping me to work out some ideas about what I wanted to do next, with my career and ShedCode. To cut a long story short, I managed to get a place as one of the residents and at the point of writing this, we’re 7 weeks into the 10 weeks.</p>

<p>Time really flies when you’re having fun and learning new things and so far that sums the residency up nicely. We’ve built thermal printing sentient characters from Wuthering Heights which are mobile, tweet and respond to SMS text messages. An incredible polargraph drawing machine as well as fixing lots of technical things for the Site organisation itself. You can read more about what we’ve been up to on the <a href="http://happenstanceproject.com/blog">happenstance project blog</a> and our <a href="http://happenstancesheffield.tumblr.com/">tumblr </a>site.</p>

<p>I’ve hankered after Research &amp; Development time for years and getting the odd day here or there hasn’t been enough. This residency though has been a mixture of R&amp;D and practical help for the organisation and it has seriously got me thinking. It’s one thing to have an idea, it’s something else though to have the time to actually try and get it to work. There have been nights after working on happenstance when I have not been able to sleep as my brain has been working overtime trying to solve problems&#8230; I feel a bit more alive!</p>

<p>The question now though for me, is</p>

<h2>Whatever next?</h2>

<p>I’m pretty good, if I can blow my own trumpet for a minute, at technical problem solving. From laser printers, to wireless networks, to security, to domains, even WordPress. As a problem solver and nosy chuffer, you don’t spend 17 years working without picking up some knowledge of what your colleagues do!</p>

<p>I’ve spent most of my time though writing and designing software. I’m not the best software engineer in the world, in fact there’s a lot of my code out there which other people now have to support for which I apologise most sincerely, but I’m not a bad all rounder.</p>

<p>Once Happenstance finishes, at the end of June, I’d like to take some time to work on some of my own projects. I’ve got two railway related products I’d like to build, plus a project for school kids and then at least one other one which is coming together.</p>

<p>Since being a Technologist in Residence though, it’s given me the hunger to get involved in other things too. It’s been a real privilege working with my fellow resident <a href="http://finalbullet.com">Leila Johnston</a>, she is a great writer, inventor and organiser of exciting events and has an incredible network of interesting people who do really interesting things.</p>

<p>And as I wrote that sentence above, it’s when I thought, hang on, that’s what I’m after. I think I WANT TO BE AN INTERESTING PERSON! So that people can say, &#8220;Hey, you know who you should get in to do such and such, you could do a lot worse than hire that friendly freelancer James Jefferies!&#8221;</p>

<h3></h3>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Week 6 – Polargraph working, mobile printers and Open House]]></title>
    <link href="http://jamesjefferies.com/2012/05/31/week-6-polargraph-working-mobile-printers-and-open-house/"/>
    <updated>2012-05-31T23:08:12+01:00</updated>
    <id>http://jamesjefferies.com/2012/05/31/week-6-polargraph-working-mobile-printers-and-open-house</id>
    <content type="html"><![CDATA[<p>Leila has done a top job of writing up about the Open House we held at Site Gallery on Friday. We had a great time talking about Happenstance so far to a full house (well cafe anyway).</p>

<p><a href="http://jamesjefferies.com/?attachment_id=551"><img src="http://happenstanceproject.com/assets/wp-content/uploads/2012/05/settingupopenhouse-620x465.jpg" alt="" /></a></p>

<p>Having the Polargraph finally up and running on the correct voltage was great and a fantastic drawing of Lord Jarvis of Cocker appeared as the event went on.</p>

<p>We also had Heathcliff Printer working (although he did conk out at one point for some unexplained reason) and Leila got her Kinnect set up doing some Minority Report style magic.</p>

<p>One of our conductive <a href="http://www.bareconductive.com/paper-houses">paint houses</a> was there too, but it was too dark really to see it in action. Winter time for those I think.</p>

<p>We had a little Q&amp;A after our talk and one of the questions really got me thinking about being a creative software engineer - what does that mean in practice and how can we encourage techies to embrace their creativity, smashing through the constraints of institutional methodologies. Sounds like that might be a future blog post!</p>

<p>A lot of cake was eaten and a good time was had by all. Thanks to all who helped and all who came along!</p>

<p><a href="http://jamesjefferies.com/?attachment_id=552"><img src="http://happenstanceproject.com/assets/wp-content/uploads/2012/05/openhouseeatingcake-620x465.jpg" alt="" /></a></p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Week 5 – a bit of a blur]]></title>
    <link href="http://jamesjefferies.com/2012/05/31/week-5-a-bit-of-a-blur/"/>
    <updated>2012-05-31T23:07:02+01:00</updated>
    <id>http://jamesjefferies.com/2012/05/31/week-5-a-bit-of-a-blur</id>
    <content type="html"><![CDATA[<p>The final week of Sprint 1 was all a bit of a blur. As we had the Future Everything conference on the Friday, my thoughts were on the presentation.</p>

<p>We also did some work on our <a href="http://polargraph.co.uk">Polargraph</a> which was not behaving very well at all. This was disappointing as we&#8217;d hope to get it working before Future Everything. What was cool though, was that we saw some Polargraphs in action at the conference, Stuart Childs and Matt Venn had their super machines in action. Matt is doing stuff with <a href="http://www.mattvenn.net/2011/09/19/polargraph-energy-monitoring/">Energy Monitoring</a></p>

<p>The Manchester Museum of Science and Industry is a great place, I especially enjoyed looking at the big steam engines and railway engines in the Power Hall. Took my mind of our talk which went OK! It was fun to see Linda and Natalia our fellow residents from Bristol and Brighton galleries respectively.</p>

<p>.. and relax! (Chris the researcher, me and Natalia looking interested.. I think!)</p>

<p><a href="http://jamesjefferies.com/?attachment_id=520"><img src="http://happenstanceproject.com/assets/wp-content/uploads/2012/05/inthepub-620x465.jpg" alt="" /></a></p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Week 4 - stutter stutter]]></title>
    <link href="http://jamesjefferies.com/2012/05/11/week-4-stutter-stutter/"/>
    <updated>2012-05-11T16:03:50+01:00</updated>
    <id>http://jamesjefferies.com/2012/05/11/week-4-stutter-stutter</id>
    <content type="html"><![CDATA[<p>This week has been a bit wonky.</p>

<p><strong>Saturday</strong> was a triumph, getting Cathy and Heathcliff doing something useful as part of Bill Drummond&#8217;s sixth form workshop. It certainly warmed the cockles &amp; Leila has written some more about it on her post.</p>

<p><strong>Tuesday</strong> was a day where we were part of Site&#8217;s Brand Innovation task force, looking at Site&#8217;s &#8216;Brand Promise&#8217;. This was jam packed and a bit of a brain strain, but we made a contribution and as we were observed by our illustrious researcher, we hopefully gave him something to write about!</p>

<p><strong>Wednesday</strong> went a bit wonky as my daughter was poorly meaning the day was very broken up. I started having a look at Ruby, the programming language whilst thinking about how we could get Cathy &amp; Heathcliff to interact a bit more with Twitter.</p>

<p><strong>Thursday</strong> was the day of working out how to get Cathy and Heathcliff mobile. A frustrating day as the components and bits and bobs we bought didn&#8217;t work or wouldn&#8217;t work how we wanted them to. We ended the day though with a 3G dongle and an ethernet to USB connector which hopefully means that if we can take a Mac, a dongle, a lead, a printer &amp; some sort of power supply then we can take them anywhere where there is a mobile signal and they&#8217;ll work.</p>

<p>We also spent a fair bit of time thinking about our contribution to <a href="http://futureeverything.org/">Future Everything</a> which is next week, meep!</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Week 3 - Cathy & Heathcliff's amazing adventures]]></title>
    <link href="http://jamesjefferies.com/2012/05/04/week-3-cathy-heathcliffs-amazing-adventures/"/>
    <updated>2012-05-04T18:18:34+01:00</updated>
    <id>http://jamesjefferies.com/2012/05/04/week-3-cathy-heathcliffs-amazing-adventures</id>
    <content type="html"><![CDATA[<p>This week has given us a real opportunity to do something interesting with Cathy &amp; Heathcliff, we spent two of our three days out of the Site office to get our heads down.</p>

<p>The first challenge was to allow 6th Formers to send messages to Cathy &amp; Heathcliff. At first we thought of hooking them up directly to twitter accounts, but as Leila had a <a href="http://twilio.com">Twilio</a> account, it meant that we could do something clever with SMS Text messages. With a bit of PHP magic on an intermediary server (timescales demanded a quick turnaround!) we managed to get the SMS messages sent to the two printers. Hooray!</p>

<p>The next step was to bypass the button on the Arduino device which you had to push each time a message arrived. We edited the C code and uploaded the new code to the devices so that instead of waiting for the button to be pushed, the green light flashed and it printed without intervention. Hooray x 2!</p>

<p>Finally, we wanted to get the messages sent to Cathy and Heathcliff&#8217;s twitter accounts - @CathyPrinter @HeathcliffPrinter - initially we looked a using the PHP OAuth libraries to authenticate and send the message to twitter, but as neither of us are particularly adept at PHP, we decided on a different solution. Using <a href="http://ifttt.com">If This Then That</a> and some server side magic, we send an email from the server, via their gmail accounts to If This Then That, which then passes them on to their twitter accounts.. Hooray x 3!</p>

<p>You can see us setting them up on our <a href="http://happenstancesheffield.tumblr.com">tumblr site</a>.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Week 2 - how do you do]]></title>
    <link href="http://jamesjefferies.com/2012/04/27/week-2-how-do-you-do/"/>
    <updated>2012-04-27T18:18:59+01:00</updated>
    <id>http://jamesjefferies.com/2012/04/27/week-2-how-do-you-do</id>
    <content type="html"><![CDATA[<p>This week has all been about pairs of trousers. It has rained a lot and usually when you are equidistant from where you are going and where you want to go, the heavens open and you get absolutely soaked. I&#8217;ve been through three pairs of trousers and counting.</p>

<p><img src="http://happenstanceproject.com/assets/wp-content/uploads/2012/04/rain-620x620.jpg" alt="rain" /></p>

<p>So trousers.. and marketing/branding innovation labs, meeting with yet more interesting people, fixing the internet and eating flapjack.</p>

<p>To distract us from the weather and all these other things we&#8217;ve had the excitement of two receipt printers which we are bringing to life. The illustrious <a href="http://twitter.com/lazyatom">James Adam</a> has written a fantastic <a href="http://gofreerange.com/hello-printer">article</a> about how to build internet enabled receipt printers. My advice would be to go away and read that, when you&#8217;re done, come back here!</p>

<p>So we have been guinea pigs, taking delivery of two printers complete with special <a href="http://www.arduino.cc/">arduino</a> kits, leads and other <a href="http://uncyclopedia.wikia.com/wiki/Gubbins">gubbins</a>. Of course, all we needed to do was plug them in (following the instructions) and BOOM! The little printers would burst in to life&#8230;.</p>

<p><img src="http://happenstanceproject.com/assets/wp-content/uploads/2012/04/heathcliff12-463x620.jpg" alt="" /></p>

<p>&#8230; except they did not :(</p>

<p>The little light flashed to say that it was talking to the internet, but the internet didn&#8217;t want to speak back. This was a blow, was it the printer, was it the lead, was it the network, was it the circuitry, was it the &#8216;sketch&#8217; (the arduino program)? So we put on our best Worzel Gummidge problem solving heads and got to work. We broke in to the server room and tried a direct connection (rather than through all the office switches and routers), fired up skype and waved the laptop in the direction of the kit whilst the illustrious one watched from afar. No joy.</p>

<p>We knew that one of the other tenants in the building used a different internet connection, so we took one of the printers up there and plugged it in. It burst into life and the backlog of messages we&#8217;d sent it arrived in a semi-orderly fashion, hurrah! We knew the printer, leads and circuitry worked, but why didn&#8217;t it work on the other network?</p>

<p>The next day the magic serial-USB debugging lead arrived and it was time to download the Arduino app and work out what on earth was happening. Once hooked up, the little bundle of electronic joy started telling us debug messages from the sketch.. which was nice, but it still didn&#8217;t work. Time for some coding I thought.</p>

<p>I don&#8217;t think you can actually see what code is being run on the device as it is compiled in to assembler, so all I could do was add some further debugging information and upload it. I had some theories about the network too, what would happen if I put in the explicit IP address? Tweaked the URL it was using? Nothing, still didn&#8217;t work. At this point I thought we may was well upload the <a href="https://github.com/freerange/printer/blob/master/printer.ino">original sketch</a> with the relevant bits tweeted&#8230;</p>

<p>AND IT ONLY WENT AND WORKED!</p>

<p>Heathcliff lives&#8230;</p>

<p><img src="http://happenstanceproject.com/assets/wp-content/uploads/2012/04/heathcliff31-620x620.jpg" alt="Heathcliff Lives" /></p>

<p>and after lunch, we got Cathy working too!</p>

<p>Next week we&#8217;ll send them off to Wuthering Heights and see what happens..</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Week 1 in Sheffield]]></title>
    <link href="http://jamesjefferies.com/2012/04/22/week-1-in-sheffield/"/>
    <updated>2012-04-22T16:19:47+01:00</updated>
    <id>http://jamesjefferies.com/2012/04/22/week-1-in-sheffield</id>
    <content type="html"><![CDATA[<p>We&#8217;re three days in to our residency and time is already flying along. We&#8217;ve spoken to a lot of people, fixed some niggly problems in the office and had some ideas which I&#8217;m sure any Technologist in Residence would be proud of!</p>

<p>Our esteemed directors at Site have been storing up interesting people for us to talk to which has been great. It&#8217;s striking how we&#8217;ve met people who are passionate, not only about what they do, but about the greater tech community in Sheffield, Sheffield itself, Yorkshire and the North! This resonates with me as a Yorkshirebod and as someone who would like to see the economic balance tip in our direction.</p>

<p>Site have a new Technical expert starting at the beginning of May so there is a small backlog of  outstanding techie issues for the organisation. I find it impossible to sit in the office without diving in to help when the printer doesn&#8217;t work or the wi-fi has gone screwy! Hopefully now we&#8217;ve fixed some of the more pressing issues but it is highlighted for me that I have to be careful with my time. We had decided that we would spend three days a week on-site in the office but actually it makes sense to spend a day elsewhere to allow us to focus on bigger tasks without interruption. We&#8217;ll try that next week to see how we go.</p>

<p>Our bigger ideas are still fermenting, but two <a href="http://arduino.cc/hu/Guide/Introduction">Arduino</a> kits arrived on Friday and as it is about 25 years since I last played with electronics in anger, I&#8217;m excited to see what we end up using them for. I think I had something like this when I was a kid&#8230; you should have heard the stylophone I made!</p>

<p><img src="http://ecx.images-amazon.com/images/I/51jZKCqIj4L._SL500_AA300_.jpg" alt="" /></p>
]]></content>
  </entry>
  
</feed>
